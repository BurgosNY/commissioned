<head>
  <title>unnamed math quiz app</title>
</head>

<template name="demoQuiz">
  {{> showProblem currentProblem}}
</template>


<template name="showProblem">

    <div class="row">
    <div class="problem" id="problem_{{id}}">

      <div class="col-xs-1"></div>
      <div class="col-xs-4">
	{{#if (isSimpleAddition this)}}
	{{> simpleAddition}}
	{{/if}}
	
	{{#if (isSimpleMultiplication this)}}
	{{> simpleMultiplication }}
	{{/if}}
	
	{{#if (isOrderOfOperations this)}}
	{{> orderOfOperations }}
	{{/if}}
      </div>
      <div class="col-xs-3">      
      {{#momentum plugin="fade"}}
      {{#if (tooltipOn this.id)}}
      <p class="text-center bg-warning">{{tooltip}}</p>
      {{/if}}
      {{/momentum}}
      </div>

      <div class="col-xs-1"></div>

      <div class="col-xs-1">
	<button id="nextButton"
		type="button"
		class="btn btn-default">Next</button>
      </div>      
    </div>
  </div>
</template>


<template name="orderOfOperations">
  <p>{{problemStatement}}</p>
  {{#each step in steps}}
  {{> operatorStep id=this.id step=step}}
  {{/each}}
</template>

<template name="operatorStep">
  <ul class="list-inline">
    {{#each field in step}}
    <li> 
      {{#if (isOperator field)}}
      <select class="cell neutral">
	<option> </option>
	<option>+</option>
	<option>-</option>
	<option>✕</option>
	<option>÷</option>
      </select>
      {{else}}
      <input class="cell neutral"
	     type="text"
	     value=""
	     size="1"
	     maxlength="1">
      {{/if}}
    </li>
    {{/each}}
  </ul>
</template>

<template name="simpleMultiplication">

  <table>
    {{#each factors }}
    {{> numberRow }}
    {{/each}}
    {{#each step in (stepsIndexes this.answer)}}
    {{> answerRow id=this.id step=step indexes=(answerIndexes this.answer step)}}
    {{/each}}
  </table>

</template>

<template name="simpleAddition">

  <table>
    {{#each summands}}
    {{> numberRow}}
    {{/each}}
    {{> answerRow id=this.id step=0 indexes=(answerIndexes this.answer)}}
  </table>

</template>

<template name="numberRow">
  <tr>
    {{#each this}}<td>{{this}}</td>{{/each}} 
  </tr>
</template>

<template name="answerRow">
  <tr>
    {{#each idx in indexes}}
    <td>
      {{#if (hasAnswer id step idx)}}
      <input class="cell neutral"
	     id="idx_{{id}}_{{step}}_{{idx}}"
	     value=""
	     type="text" size="1" maxlength="1"/>
      {{/if}}
    </td>
    {{/each}}
  </tr>
</template>


<body>
  <div class="container-fluid">
    {{> demoQuiz}}
  </div>
</body>

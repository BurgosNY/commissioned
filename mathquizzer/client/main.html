<head>
  <title>unnamed math quiz app</title>
</head>


<template name="demoQuiz">

  {{> showProblem currentProblem}}

</template>


<template name="showProblem">

    <div class="row">
    <div class="problem" id="problem_{{id}}">

      <div class="col-xs-1"></div>

      {{#if (isSimpleAddition this)}}
      {{> simpleAddition}}
      {{/if}}
      
      {{#if (isSimpleMultiplication this)}}
      {{> simpleMultiplication }}
      {{/if}}

      <div class="col-xs-3">      
      {{#momentum plugin="fade"}}
      {{#if (tooltipOn this.id)}}
      <p class="text-center bg-warning">{{tooltip}}</p>
      {{/if}}
      {{/momentum}}
      </div>

      <div class="col-xs-1"></div>

      <div class="col-xs-1">
	<button id="nextButton"
		type="button"
		class="btn btn-default">Next</button>
      </div>      
    </div>
  </div>
</template>


<template name="simpleMultiplication">
  <div class="col-xs-4">
  <table>
    {{#each factors }}
    {{> numberRow }}
    {{/each}}
    {{#each step in (stepsIndexes this.answer)}}
    {{> answerRow id=this.id step=step indexes=(answerIndexes this.answer step)}}
    {{/each}}
  </table>
  </div>
</template>

<template name="simpleAddition">
  <div class="col-xs-4">
  <table>
    {{#each summands}}
    {{> numberRow}}
    {{/each}}
    {{> answerRow id=this.id step=0 indexes=(answerIndexes this.answer)}}
  </table>
  </div>
</template>

<template name="numberRow">
  <tr>
    {{#each this}}<td>{{this}}</td>{{/each}} 
  </tr>
</template>

<template name="answerRow">
  <tr>
    {{#each idx in indexes}}
    <td>
      {{#if (hasAnswer id step idx)}}
      <input class="cell neutral"
	     id="idx_{{id}}_{{step}}_{{idx}}"
	     value=""
	     type="text" size="1" maxlength="1"/>
      {{/if}}
    </td>
    {{/each}}
  </tr>
</template>


<body>
  <div class="container-fluid">
    {{> demoQuiz}}
  </div>
</body>
